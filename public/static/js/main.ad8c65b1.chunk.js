(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),l=a.n(r),o=(a(62),a(63),a(4)),s=c.a.createContext({theme:"pink",setTheme:function(){}}),i=function(e){var t=e.children,a=Object(n.useState)("pink"),r=Object(o.a)(a,2),l=r[0],i=r[1];return c.a.createElement(s.Provider,{value:{theme:l,setTheme:i}},t)},u=function(e){var t=e.children,a=Object(n.useContext)(s).theme;return c.a.createElement("div",{className:"bg-".concat(a,"-100 h-full flex flex-col justify-center")},t)},m=c.a.createContext({state:{name:"",img:"cheshire",roomId:""},setState:function(){}}),f=function(e){var t=e.children,a=Object(n.useState)({name:"",img:"cheshire",roomId:""}),r=Object(o.a)(a,2),l=r[0],s=r[1];return c.a.createElement(m.Provider,{value:{state:l,setState:s}},t)},p=a(30),b=a(9),d=a(6),x=a.n(d),h=a(55),E=a(10),v=a(22),g=a.n(v),j=a(17),O=a(52),N=a(48),y=function(){var e=Object(n.useContext)(s).theme;return c.a.createElement("footer",{className:"bg-".concat(e,"-500 p-3 text-white")},c.a.createElement("p",{className:"text-xs text-center"},"This app is dedicated to Candy, my one and only."))},w=function(){var e=Object(n.useContext)(s).theme;return c.a.createElement("header",{className:"bg-".concat(e,"-500 p-3 shadow-inner")},c.a.createElement("h1",{className:"text-2xl text-white"},"Chat!"))},C=a(14),k=a(106),S=a(49),I=a.n(S),T=a(50),D=a.n(T),L={lucifer:I.a,cheshire:D.a},F={transitionDuration:"".concat(500,"ms"),transitionTimingFunction:"ease-in-out",transitionProperty:"all",opacity:0,transform:"scale(0)"},J={entering:{opacity:1,transform:"scale(1.05)"},entered:{opacity:1,transform:"scale(1)"},exiting:{opacity:0,transform:"scale(0)"},exited:{opacity:0,transform:"scale(0)"},unmounted:{opacity:0,transform:"scale(0)"}},P=function(e){var t=e.context,a=t.id,r=t.message,l=t.name,i=t.img,u=Object(n.useContext)(m).state,f=Object(n.useContext)(s).theme,p=Object(n.useState)(!1),b=Object(o.a)(p,2),d=b[0],x=b[1],h=u.name===l;return Object(n.useEffect)((function(){x(!0)}),[]),c.a.createElement(k.a,{in:d,timeout:500},(function(e){return c.a.createElement("li",{className:"".concat(h?"bg-".concat(f,"-800 self-end self border-").concat(f,"-800 text-").concat(f,"-800"):"bg-".concat(f,"-500 border-").concat(f,"-500 text-").concat(f,"-500")," flex flex-col p-2 my-1 max-w-md w-11/12 conversation shadow-md"),style:Object(C.a)({},F,{},J[e])},c.a.createElement("div",{className:"flex text-white items-center"},c.a.createElement("div",{className:"bg-white rounded-full w-10 overflow-hidden mr-2"},c.a.createElement("img",{src:L[i],alt:"cheshire",className:"max-w-full"})),c.a.createElement("p",{className:"text-sm"},l)),c.a.createElement("p",{className:"text-lg ml-10 text-white"},r),c.a.createElement("p",{className:"text-xs opacity-75 text-white text-right"},new Date(a).toLocaleTimeString()))}))},R=a(51),z=a.n(R),A=function(e){var t=Object(n.useState)(z()(e)),a=Object(o.a)(t,1)[0],c=Object(n.useState)(g()());return{socket:a,app:Object(o.a)(c,1)[0]}};j.b.add(O.a);var B=function(){var e=Object(n.useContext)(m).state,t=Object(n.useContext)(s).theme,a=Object(n.useState)([]),r=Object(o.a)(a,2),l=r[0],i=r[1],u=Object(n.useState)(""),f=Object(o.a)(u,2),p=f[0],b=f[1],d=A("/"),v=d.socket,j=d.app,O=Object(n.useRef)(null),C=Object(n.useRef)(null);Object(n.useEffect)((function(){j.configure(g.a.socketio(v)),j.service("message").on("created",function(){var e=Object(E.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((function(e){return[].concat(Object(h.a)(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k()}),[j,v]),Object(n.useEffect)((function(){C.current&&(C.current.scrollTop=C.current.scrollHeight)}),[l]);var k=function(){var e=Object(E.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.service("message").find();case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(w,null),c.a.createElement("main",{className:"flex flex-col flex-1 overflow-auto",ref:C},c.a.createElement("div",{className:"flex-1 bg-".concat(t,"-200 p-3 pb-10")},c.a.createElement("ul",{className:"flex flex-col px-2"},l.map((function(e){return c.a.createElement(P,{context:e,key:e.id})}))))),c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),j.service("message").create({name:e.name,message:p,img:e.img}),b("")}},c.a.createElement("div",{className:"flex"},c.a.createElement("input",{ref:O,className:"resize-none outline-none w-full p-2 box-border h-12",value:p,onChange:function(e){b(e.target.value)},placeholder:"Write something..."}),c.a.createElement("button",{className:"outline-none bg-".concat(t,"-800 text-white p-3 w-12 duration-300 ease-in-out transition-all hover:bg-").concat(t,"-700")},c.a.createElement(N.a,{icon:"paper-plane"}))))),c.a.createElement(y,null))},H=function(e){var t=e.label,a=e.entry,r=e.type,l=void 0===r?"text":r,o=Object(n.useContext)(m),i=o.state,u=o.setState,f=Object(n.useContext)(s).theme,p=i[a];return c.a.createElement("div",{className:"mt-1 mb-3 flex flex-col"},c.a.createElement("label",{className:"text-xs opacity-75"},t),c.a.createElement("input",{className:"py-1 transition-all duration-300 ease-in-out bg-transparent border-b-2 outline-none focus:border-".concat(f,"-800"),autoComplete:"off",type:l,value:p,onChange:function(e){var t=Object(C.a)({},i);Object.assign(t)[a]=e.target.value,u(t)}}))},M=a(56),W=function(e){var t=e.label,a=e.name,r=e.id,l=Object(M.a)(e,["label","name","id"]),o=Object(n.useContext)(s).setTheme,i=Object(n.useContext)(m),u=i.state,f=i.setState;return c.a.createElement("div",{className:"mr-3 flex items-center"},c.a.createElement("input",Object.assign({type:"radio",name:a,id:r},l,{onChange:function(e){console.log(e.target.id),o(e.target.value),f(Object(C.a)({},u,{img:e.target.id}))}})),c.a.createElement("label",{htmlFor:r,className:"ml-1"},t))},q=function(){var e=Object(E.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.roomId,console.log(a,n),e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=e.label,a=e.children;return c.a.createElement("fieldset",{className:"py-3"},c.a.createElement("label",{className:"text-xs opacity-75"},t),c.a.createElement("div",{className:"flex"},a))},K=function(){var e=Object(n.useContext)(m).state,t=Object(n.useContext)(s).theme,a=Object(b.f)(),r=function(){var t=Object(E.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),""===e.name||""===e.roomId){t.next=6;break}return t.next=4,q(e);case 4:t.sent?(console.log({action:"Login",status:"success"}),a.push("/chat")):console.log({action:"Login",status:"failed"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"container mx-auto max-w-md w-full bg-".concat(t,"-500 text-white p-3")},c.a.createElement("h1",{className:"text-2xl"},"Chat!"),c.a.createElement("div",{className:"mt-2"},c.a.createElement("form",{className:"flex flex-col",onSubmit:r},c.a.createElement(H,{label:"Name",entry:"name"}),c.a.createElement(G,{label:"Avatar"},c.a.createElement(W,{label:"Cheshire",name:"avatar",id:"cheshire",value:"pink",defaultChecked:!0}),c.a.createElement(W,{label:"Lucifer",name:"avatar",id:"lucifer",value:"gray"})),c.a.createElement(H,{label:"Chat Room ID",type:"text",entry:"roomId"}),c.a.createElement("button",{className:"duration-300 ease-in-out transition-all mt-3 p-3 bg-".concat(t,"-800 outline-none hover:bg-").concat(t,"-700")},"JOIN"))))},Q=function(){return c.a.createElement(p.a,null,c.a.createElement(b.c,null,c.a.createElement(b.a,{path:"/chat"},c.a.createElement(B,null)),c.a.createElement(b.a,{path:"/"},c.a.createElement(K,null))))},U=function(){return c.a.createElement(i,null,c.a.createElement(f,null,c.a.createElement(u,null,c.a.createElement(Q,null))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(U,null)),document.getElementById("root"))},49:function(e,t,a){e.exports=a.p+"static/media/lucifer.13a3910d.png"},50:function(e,t,a){e.exports=a.p+"static/media/cheshire.16569809.png"},57:function(e,t,a){e.exports=a(103)},62:function(e,t,a){},63:function(e,t,a){},98:function(e,t){}},[[57,1,2]]]);
//# sourceMappingURL=main.ad8c65b1.chunk.js.map